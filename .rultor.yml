architect:
- isgarlo
docker:
  image: "maven:3-jdk-8"
decrypt:
  settings.xml: "repo/settings.xml.asc"
  pubring.gpg: "repo/pubring.gpg.asc"
  secring.gpg: "repo/secring.gpg.asc"
merge:
  script: |-
    mvn clean install --errors --settings ../settings.xml
  commanders:
  - isgarlo
deploy:
  script: |-
    mvn clean deploy --errors --settings ../settings.xml
  commanders:
  - isgarlo
release:
  pre: false
  script: |
    mkdir /home/r/gpg
    mv /home/r/pubring.gpg /home/r/gpg/pubring.gpg
    mv /home/r/secring.gpg /home/r/gpg/secring.gpg
    chmod -R 700 /home/r/gpg
    mvn versions:set "-DnewVersion=${tag}"
    git commit -am "${tag}"
    mvn clean deploy -Pgivemeadriver --errors --settings ../settings.xml
  commanders:
  - isgarlo
